{"remainingRequest":"D:\\IEMS5718web\\shop_demo\\node_modules\\babel-loader\\lib\\index.js!D:\\IEMS5718web\\shop_demo\\node_modules\\vue-loader-v16\\dist\\templateLoader.js??ref--6!D:\\IEMS5718web\\shop_demo\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\IEMS5718web\\shop_demo\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!D:\\IEMS5718web\\shop_demo\\src\\App.vue?vue&type=template&id=7ba5bd90","dependencies":[{"path":"D:\\IEMS5718web\\shop_demo\\src\\App.vue","mtime":1746349569479},{"path":"D:\\IEMS5718web\\shop_demo\\babel.config.js","mtime":1738482584419},{"path":"D:\\IEMS5718web\\shop_demo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746349774639},{"path":"D:\\IEMS5718web\\shop_demo\\node_modules\\babel-loader\\lib\\index.js","mtime":1746349776751},{"path":"D:\\IEMS5718web\\shop_demo\\node_modules\\vue-loader-v16\\dist\\templateLoader.js","mtime":1746349778863},{"path":"D:\\IEMS5718web\\shop_demo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746349774639},{"path":"D:\\IEMS5718web\\shop_demo\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1746349777201}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgY3JlYXRlVGV4dFZOb2RlIGFzIF9jcmVhdGVUZXh0Vk5vZGUsIHJlc29sdmVDb21wb25lbnQgYXMgX3Jlc29sdmVDb21wb25lbnQsIHdpdGhDdHggYXMgX3dpdGhDdHgsIGNyZWF0ZVZOb2RlIGFzIF9jcmVhdGVWTm9kZSwgRnJhZ21lbnQgYXMgX0ZyYWdtZW50LCBvcGVuQmxvY2sgYXMgX29wZW5CbG9jaywgY3JlYXRlRWxlbWVudEJsb2NrIGFzIF9jcmVhdGVFbGVtZW50QmxvY2ssIGNyZWF0ZUNvbW1lbnRWTm9kZSBhcyBfY3JlYXRlQ29tbWVudFZOb2RlLCBjcmVhdGVCbG9jayBhcyBfY3JlYXRlQmxvY2ssIHdpdGhNb2RpZmllcnMgYXMgX3dpdGhNb2RpZmllcnMsIGNyZWF0ZUVsZW1lbnRWTm9kZSBhcyBfY3JlYXRlRWxlbWVudFZOb2RlLCB0b0Rpc3BsYXlTdHJpbmcgYXMgX3RvRGlzcGxheVN0cmluZyB9IGZyb20gInZ1ZSI7CmNvbnN0IF9ob2lzdGVkXzEgPSB7CiAgaWQ6ICJuYXYiCn07CmNvbnN0IF9ob2lzdGVkXzIgPSB7CiAgaWQ6ICJhcHAiCn07CmV4cG9ydCBmdW5jdGlvbiByZW5kZXIoX2N0eCwgX2NhY2hlLCAkcHJvcHMsICRzZXR1cCwgJGRhdGEsICRvcHRpb25zKSB7CiAgY29uc3QgX2NvbXBvbmVudF9yb3V0ZXJfbGluayA9IF9yZXNvbHZlQ29tcG9uZW50KCJyb3V0ZXItbGluayIpOwogIGNvbnN0IF9jb21wb25lbnRfcm91dGVyX3ZpZXcgPSBfcmVzb2x2ZUNvbXBvbmVudCgicm91dGVyLXZpZXciKTsKICBjb25zdCBfY29tcG9uZW50X0Zvb3RlciA9IF9yZXNvbHZlQ29tcG9uZW50KCJGb290ZXIiKTsKICByZXR1cm4gX29wZW5CbG9jaygpLCBfY3JlYXRlRWxlbWVudEJsb2NrKF9GcmFnbWVudCwgbnVsbCwgW19jcmVhdGVFbGVtZW50Vk5vZGUoImRpdiIsIF9ob2lzdGVkXzEsIFshX2N0eC5pc0FkbWluID8gKF9vcGVuQmxvY2soKSwgX2NyZWF0ZUVsZW1lbnRCbG9jayhfRnJhZ21lbnQsIHsKICAgIGtleTogMAogIH0sIFtfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9yb3V0ZXJfbGluaywgewogICAgdG86ICIvIgogIH0sIHsKICAgIGRlZmF1bHQ6IF93aXRoQ3R4KCgpID0+IF9jYWNoZVsxXSB8fCAoX2NhY2hlWzFdID0gW19jcmVhdGVUZXh0Vk5vZGUoIkhvbWUiKV0pKSwKICAgIF86IDEgLyogU1RBQkxFICovCiAgfSksIF9jYWNoZVszXSB8fCAoX2NhY2hlWzNdID0gX2NyZWF0ZVRleHRWTm9kZSgiIHwgIikpLCBfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9yb3V0ZXJfbGluaywgewogICAgdG86ICIvYWJvdXQiCiAgfSwgewogICAgZGVmYXVsdDogX3dpdGhDdHgoKCkgPT4gX2NhY2hlWzJdIHx8IChfY2FjaGVbMl0gPSBbX2NyZWF0ZVRleHRWTm9kZSgiQWJvdXQiKV0pKSwKICAgIF86IDEgLyogU1RBQkxFICovCiAgfSksIF9jYWNoZVs0XSB8fCAoX2NhY2hlWzRdID0gX2NyZWF0ZVRleHRWTm9kZSgiIHwgIikpXSwgNjQgLyogU1RBQkxFX0ZSQUdNRU5UICovKSkgOiBfY3JlYXRlQ29tbWVudFZOb2RlKCJ2LWlmIiwgdHJ1ZSksIF9jdHguaXNMb2dnZWRJbiA/IChfb3BlbkJsb2NrKCksIF9jcmVhdGVFbGVtZW50QmxvY2soX0ZyYWdtZW50LCB7CiAgICBrZXk6IDEKICB9LCBbX2N0eC5pc0FkbWluID8gKF9vcGVuQmxvY2soKSwgX2NyZWF0ZUJsb2NrKF9jb21wb25lbnRfcm91dGVyX2xpbmssIHsKICAgIGtleTogMCwKICAgIHRvOiAiL2FkbWluIgogIH0sIHsKICAgIGRlZmF1bHQ6IF93aXRoQ3R4KCgpID0+IF9jYWNoZVs1XSB8fCAoX2NhY2hlWzVdID0gW19jcmVhdGVUZXh0Vk5vZGUoIkFkbWluIFBhbmVsIHwgIildKSksCiAgICBfOiAxIC8qIFNUQUJMRSAqLwogIH0pKSA6IF9jcmVhdGVDb21tZW50Vk5vZGUoInYtaWYiLCB0cnVlKSwgX2NyZWF0ZUNvbW1lbnRWTm9kZSgiIDxyb3V0ZXItbGluayB0bz1cIi9jaGFuZ2UtcGFzc3dvcmRcIj5DaGFuZ2UgUGFzc3dvcmQ8L3JvdXRlci1saW5rPiB8ICIpLCAhX2N0eC5pc0FkbWluID8gKF9vcGVuQmxvY2soKSwgX2NyZWF0ZUJsb2NrKF9jb21wb25lbnRfcm91dGVyX2xpbmssIHsKICAgIGtleTogMSwKICAgIHRvOiAiL29yZGVycyIKICB9LCB7CiAgICBkZWZhdWx0OiBfd2l0aEN0eCgoKSA9PiBfY2FjaGVbNl0gfHwgKF9jYWNoZVs2XSA9IFtfY3JlYXRlVGV4dFZOb2RlKCJPcmRlcnMgfCAiKV0pKSwKICAgIF86IDEgLyogU1RBQkxFICovCiAgfSkpIDogX2NyZWF0ZUNvbW1lbnRWTm9kZSgidi1pZiIsIHRydWUpLCBfY3JlYXRlRWxlbWVudFZOb2RlKCJhIiwgewogICAgaHJlZjogIiMiLAogICAgb25DbGljazogX2NhY2hlWzBdIHx8IChfY2FjaGVbMF0gPSBfd2l0aE1vZGlmaWVycygoLi4uYXJncykgPT4gJG9wdGlvbnMuaGFuZGxlTG9nb3V0ICYmICRvcHRpb25zLmhhbmRsZUxvZ291dCguLi5hcmdzKSwgWyJwcmV2ZW50Il0pKQogIH0sICJMb2dvdXQiKV0sIDY0IC8qIFNUQUJMRV9GUkFHTUVOVCAqLykpIDogKF9vcGVuQmxvY2soKSwgX2NyZWF0ZUJsb2NrKF9jb21wb25lbnRfcm91dGVyX2xpbmssIHsKICAgIGtleTogMiwKICAgIHRvOiAiL2xvZ2luIgogIH0sIHsKICAgIGRlZmF1bHQ6IF93aXRoQ3R4KCgpID0+IF9jYWNoZVs3XSB8fCAoX2NhY2hlWzddID0gW19jcmVhdGVUZXh0Vk5vZGUoIkxvZ2luIildKSksCiAgICBfOiAxIC8qIFNUQUJMRSAqLwogIH0pKV0pLCBfY3JlYXRlRWxlbWVudFZOb2RlKCJzcGFuIiwgbnVsbCwgIldlbGNvbWUsICIgKyBfdG9EaXNwbGF5U3RyaW5nKF9jdHgudXNlcm5hbWUgfHwgJ0d1ZXN0JykgKyAiISIsIDEgLyogVEVYVCAqLyksIF9jcmVhdGVFbGVtZW50Vk5vZGUoImRpdiIsIF9ob2lzdGVkXzIsIFtfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9yb3V0ZXJfdmlldyksIF9jcmVhdGVWTm9kZShfY29tcG9uZW50X0Zvb3RlcildKV0sIDY0IC8qIFNUQUJMRV9GUkFHTUVOVCAqLyk7Cn0="},{"version":3,"names":["id","_createElementVNode","_hoisted_1","_ctx","isAdmin","_createElementBlock","_Fragment","key","_createVNode","_component_router_link","to","_cache","isLoggedIn","_createBlock","_createCommentVNode","href","onClick","_withModifiers","args","$options","handleLogout","_toDisplayString","username","_hoisted_2","_component_router_view","_component_Footer"],"sources":["D:\\IEMS5718web\\shop_demo\\src\\App.vue"],"sourcesContent":["<template>\n  <div id=\"nav\">\n    <template v-if = \"!isAdmin\">\n      <router-link to=\"/\">Home</router-link> |\n    <router-link to=\"/about\">About</router-link> |\n    </template>\n    \n    <template v-if=\"isLoggedIn\">\n      <router-link v-if=\"isAdmin\" to=\"/admin\">Admin Panel  | </router-link>\n      <!-- <router-link to=\"/change-password\">Change Password</router-link> | -->\n      <router-link v-if=\"!isAdmin\" to=\"/orders\">Orders | </router-link>\n      <a href=\"#\" @click.prevent=\"handleLogout\">Logout</a>\n    </template>\n    <template v-else>\n      <router-link to=\"/login\">Login</router-link>\n    </template>\n  </div>\n  <span>Welcome, {{ username || 'Guest' }}!</span>\n  <div id=\"app\">\n    <router-view/>\n    <Footer />\n  </div>\n</template>\n\n<script>\nimport Footer from \"./components/Footer.vue\";\nimport { mapGetters, mapActions } from 'vuex';\nimport { useStore } from 'vuex';\nimport { onMounted } from 'vue';\nimport request from '@/utils/request';\n\nexport default {\n  name: \"App\",\n  components: { Footer },\n  computed: {\n    ...mapGetters(['isLoggedIn', 'username', 'isAdmin'])\n  },\n  methods: {\n    ...mapActions(['logout']),\n    async handleLogout() {\n      try {\n        await request.post('/api/logout');\n        localStorage.removeItem('auth_token');\n        this.logout();\n        this.$router.push('/');\n      } catch (error) {\n        console.error('Logout failed:', error);\n      }\n    }\n  },\n  setup() {\n    const store = useStore();\n\n    onMounted(() => {\n      // 从 localStorage 恢复登录状态\n      const username = localStorage.getItem('username');\n      const isAdmin = localStorage.getItem('isAdmin') === 'true';\n      const token = localStorage.getItem('auth_token');\n      \n      if (token && username) {\n        store.dispatch('login', {\n          username,\n          isAdmin\n        });\n      }\n    });\n  }\n};\n</script>\n\n<style>\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n}\n\n#nav {\n  padding: 30px;\n}\n\n#nav a {\n  font-weight: bold;\n  color: #2c3e50;\n}\n\n#nav a.router-link-exact-active {\n  color: #42b983;\n}\n</style>\n"],"mappings":";;EACOA,EAAE,EAAC;AAAK;;EAiBRA,EAAE,EAAC;AAAK;;;;;6DAjBbC,mBAAA,CAeM,OAfNC,UAeM,G,CAdeC,IAAA,CAAAC,OAAO,I,cAA1BC,mBAAA,CAGWC,SAAA;IAAAC,GAAA;EAAA,IAFTC,YAAA,CAAsCC,sBAAA;IAAzBC,EAAE,EAAC;EAAG;sBAAC,MAAIC,MAAA,QAAAA,MAAA,O,iBAAJ,MAAI,E;;iDAAc,KACxC,IAAAH,YAAA,CAA4CC,sBAAA;IAA/BC,EAAE,EAAC;EAAQ;sBAAC,MAAKC,MAAA,QAAAA,MAAA,O,iBAAL,OAAK,E;;iDAAc,KAC5C,G,kEAEgBR,IAAA,CAAAS,UAAU,I,cAA1BP,mBAAA,CAKWC,SAAA;IAAAC,GAAA;EAAA,IAJUJ,IAAA,CAAAC,OAAO,I,cAA1BS,YAAA,CAAqEJ,sBAAA;;IAAzCC,EAAE,EAAC;;sBAAS,MAAeC,MAAA,QAAAA,MAAA,O,iBAAf,gBAAe,E;;2CACvDG,mBAAA,0EAA2E,E,CACvDX,IAAA,CAAAC,OAAO,I,cAA3BS,YAAA,CAAiEJ,sBAAA;;IAApCC,EAAE,EAAC;;sBAAU,MAASC,MAAA,QAAAA,MAAA,O,iBAAT,WAAS,E;;2CACnDV,mBAAA,CAAoD;IAAjDc,IAAI,EAAC,GAAG;IAAEC,OAAK,EAAAL,MAAA,QAAAA,MAAA,MAAAM,cAAA,KAAAC,IAAA,KAAUC,QAAA,CAAAC,YAAA,IAAAD,QAAA,CAAAC,YAAA,IAAAF,IAAA,CAAY;KAAE,QAAM,E,8CAGhDL,YAAA,CAA4CJ,sBAAA;;IAA/BC,EAAE,EAAC;;sBAAS,MAAKC,MAAA,QAAAA,MAAA,O,iBAAL,OAAK,E;;SAGlCV,mBAAA,CAAgD,cAA1C,WAAS,GAAAoB,gBAAA,CAAGlB,IAAA,CAAAmB,QAAQ,eAAc,GAAC,iBACzCrB,mBAAA,CAGM,OAHNsB,UAGM,GAFJf,YAAA,CAAcgB,sBAAA,GACdhB,YAAA,CAAUiB,iBAAA,E","ignoreList":[]}]}