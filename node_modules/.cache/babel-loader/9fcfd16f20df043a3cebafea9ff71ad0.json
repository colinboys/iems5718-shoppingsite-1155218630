{"remainingRequest":"D:\\IEMS5718web\\shop_demo\\node_modules\\thread-loader\\dist\\cjs.js!D:\\IEMS5718web\\shop_demo\\node_modules\\babel-loader\\lib\\index.js!D:\\IEMS5718web\\shop_demo\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\IEMS5718web\\shop_demo\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!D:\\IEMS5718web\\shop_demo\\src\\views\\ResetPassword.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\IEMS5718web\\shop_demo\\src\\views\\ResetPassword.vue","mtime":1745133346609},{"path":"D:\\IEMS5718web\\shop_demo\\babel.config.js","mtime":1738482584419},{"path":"D:\\IEMS5718web\\shop_demo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746349774639},{"path":"D:\\IEMS5718web\\shop_demo\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1746349774611},{"path":"D:\\IEMS5718web\\shop_demo\\node_modules\\babel-loader\\lib\\index.js","mtime":1746349776751},{"path":"D:\\IEMS5718web\\shop_demo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746349774639},{"path":"D:\\IEMS5718web\\shop_demo\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1746349777201}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCByZXF1ZXN0IGZyb20gJ0AvdXRpbHMvcmVxdWVzdCc7CmltcG9ydCB7IHVzZVJvdXRlciwgdXNlUm91dGUgfSBmcm9tICd2dWUtcm91dGVyJzsKaW1wb3J0IHsgcmVmLCBvbk1vdW50ZWQgfSBmcm9tICd2dWUnOwpleHBvcnQgZGVmYXVsdCB7CiAgc2V0dXAoKSB7CiAgICBjb25zdCByb3V0ZXIgPSB1c2VSb3V0ZXIoKTsKICAgIGNvbnN0IHJvdXRlID0gdXNlUm91dGUoKTsKICAgIHJldHVybiB7CiAgICAgIHRva2VuOiByb3V0ZS5wYXJhbXMudG9rZW4KICAgIH07CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZW1haWw6ICcnLAogICAgICBzdGVwOiAxLAogICAgICBlcnJvck1lc3NhZ2U6ICcnLAogICAgICBzdWNjZXNzTWVzc2FnZTogJycsCiAgICAgIG5ld1Bhc3N3b3JkOiAnJywKICAgICAgY29uZmlybVBhc3N3b3JkOiAnJwogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGFzeW5jIHJlcXVlc3RSZXNldCgpIHsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnZW1haWwnLCB0aGlzLmVtYWlsKTsKICAgICAgICBhd2FpdCByZXF1ZXN0LnBvc3QoJy9hcGkvcmVzZXQtcGFzc3dvcmQtcmVxdWVzdCcsIGZvcm1EYXRhLCB7CiAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnbXVsdGlwYXJ0L2Zvcm0tZGF0YScKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICB0aGlzLnN0ZXAgPSAyOwogICAgICAgIHRoaXMuZXJyb3JNZXNzYWdlID0gJyc7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgdmFyIF9lcnJvciRyZXNwb25zZTsKICAgICAgICB0aGlzLmVycm9yTWVzc2FnZSA9ICgoX2Vycm9yJHJlc3BvbnNlID0gZXJyb3IucmVzcG9uc2UpID09PSBudWxsIHx8IF9lcnJvciRyZXNwb25zZSA9PT0gdm9pZCAwIHx8IChfZXJyb3IkcmVzcG9uc2UgPSBfZXJyb3IkcmVzcG9uc2UuZGF0YSkgPT09IG51bGwgfHwgX2Vycm9yJHJlc3BvbnNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZXJyb3IkcmVzcG9uc2UuZGV0YWlsKSB8fCAnQW4gZXJyb3Igb2NjdXJyZWQnOwogICAgICB9CiAgICB9LAogICAgYXN5bmMgcmVzZXRQYXNzd29yZCgpIHsKICAgICAgaWYgKHRoaXMubmV3UGFzc3dvcmQgIT09IHRoaXMuY29uZmlybVBhc3N3b3JkKSB7CiAgICAgICAgdGhpcy5lcnJvck1lc3NhZ2UgPSAnUGFzc3dvcmRzIGRvIG5vdCBtYXRjaCc7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ25ld19wYXNzd29yZCcsIHRoaXMubmV3UGFzc3dvcmQpOwogICAgICAgIGF3YWl0IHJlcXVlc3QucG9zdChgL2FwaS9yZXNldC1wYXNzd29yZC8ke3RoaXMudG9rZW59YCwgZm9ybURhdGEsIHsKICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdtdWx0aXBhcnQvZm9ybS1kYXRhJwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHRoaXMuc3VjY2Vzc01lc3NhZ2UgPSAnUGFzc3dvcmQgaGFzIGJlZW4gcmVzZXQgc3VjY2Vzc2Z1bGx5JzsKICAgICAgICAvLyAz56eS5ZCO6Lez6L2s5Yiw55m75b2V6aG1CiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2xvZ2luJyk7CiAgICAgICAgfSwgMzAwMCk7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgdmFyIF9lcnJvciRyZXNwb25zZTI7CiAgICAgICAgdGhpcy5lcnJvck1lc3NhZ2UgPSAoKF9lcnJvciRyZXNwb25zZTIgPSBlcnJvci5yZXNwb25zZSkgPT09IG51bGwgfHwgX2Vycm9yJHJlc3BvbnNlMiA9PT0gdm9pZCAwIHx8IChfZXJyb3IkcmVzcG9uc2UyID0gX2Vycm9yJHJlc3BvbnNlMi5kYXRhKSA9PT0gbnVsbCB8fCBfZXJyb3IkcmVzcG9uc2UyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZXJyb3IkcmVzcG9uc2UyLmRldGFpbCkgfHwgJ0ZhaWxlZCB0byByZXNldCBwYXNzd29yZCc7CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"names":["request","useRouter","useRoute","ref","onMounted","setup","router","route","token","params","data","email","step","errorMessage","successMessage","newPassword","confirmPassword","methods","requestReset","formData","FormData","append","post","headers","error","_error$response","response","detail","resetPassword","setTimeout","$router","push","_error$response2"],"sources":["D:\\IEMS5718web\\shop_demo\\src\\views\\ResetPassword.vue"],"sourcesContent":["<template>\r\n  <div class=\"reset-password\">\r\n    <div class=\"form-container\">\r\n      <!-- 输入邮箱请求重置页面 -->\r\n      <div v-if=\"!token\">\r\n        <h2>Reset Password</h2>\r\n        <div v-if=\"step === 1\">\r\n          <form @submit.prevent=\"requestReset\">\r\n            <div class=\"form-group\">\r\n              <label>Email Address</label>\r\n              <input v-model=\"email\" type=\"email\" required />\r\n            </div>\r\n            <button type=\"submit\">Send Reset Link</button>\r\n          </form>\r\n        </div>\r\n        <div v-if=\"step === 2\">\r\n          <p class=\"success-message\">\r\n            If an account exists with this email, you will receive a password reset link.\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 重置密码页面 -->\r\n      <div v-else>\r\n        <h2>Set New Password</h2>\r\n        <form @submit.prevent=\"resetPassword\">\r\n          <div class=\"form-group\">\r\n            <label>New Password</label>\r\n            <input v-model=\"newPassword\" type=\"password\" required />\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label>Confirm Password</label>\r\n            <input v-model=\"confirmPassword\" type=\"password\" required />\r\n          </div>\r\n          <button type=\"submit\">Reset Password</button>\r\n        </form>\r\n      </div>\r\n\r\n      <p v-if=\"errorMessage\" class=\"error\">{{ errorMessage }}</p>\r\n      <p v-if=\"successMessage\" class=\"success-message\">{{ successMessage }}</p>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport request from '@/utils/request'\r\nimport { useRouter, useRoute } from 'vue-router'\r\nimport { ref, onMounted } from 'vue'\r\n\r\nexport default {\r\n  setup() {\r\n    const router = useRouter()\r\n    const route = useRoute()\r\n    \r\n    return {\r\n      token: route.params.token\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      email: '',\r\n      step: 1,\r\n      errorMessage: '',\r\n      successMessage: '',\r\n      newPassword: '',\r\n      confirmPassword: ''\r\n    }\r\n  },\r\n  methods: {\r\n    async requestReset() {\r\n      try {\r\n        const formData = new FormData()\r\n        formData.append('email', this.email)\r\n        \r\n        await request.post('/api/reset-password-request', formData, {\r\n          headers: { 'Content-Type': 'multipart/form-data' }\r\n        })\r\n        \r\n        this.step = 2\r\n        this.errorMessage = ''\r\n      } catch (error) {\r\n        this.errorMessage = error.response?.data?.detail || 'An error occurred'\r\n      }\r\n    },\r\n    \r\n    async resetPassword() {\r\n      if (this.newPassword !== this.confirmPassword) {\r\n        this.errorMessage = 'Passwords do not match'\r\n        return\r\n      }\r\n\r\n      try {\r\n        const formData = new FormData()\r\n        formData.append('new_password', this.newPassword)\r\n        \r\n        await request.post(`/api/reset-password/${this.token}`, formData, {\r\n          headers: { 'Content-Type': 'multipart/form-data' }\r\n        })\r\n        \r\n        this.successMessage = 'Password has been reset successfully'\r\n        // 3秒后跳转到登录页\r\n        setTimeout(() => {\r\n          this.$router.push('/login')\r\n        }, 3000)\r\n      } catch (error) {\r\n        this.errorMessage = error.response?.data?.detail || 'Failed to reset password'\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.reset-password {\r\n  max-width: 400px;\r\n  margin: 2rem auto;\r\n  padding: 2rem;\r\n}\r\n\r\n.form-container {\r\n  background-color: #fff;\r\n  padding: 20px;\r\n  border-radius: 8px;\r\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.form-group {\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.form-group label {\r\n  display: block;\r\n  margin-bottom: 0.5rem;\r\n}\r\n\r\n.form-group input {\r\n  width: 100%;\r\n  padding: 8px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  margin-bottom: 15px;\r\n}\r\n\r\nbutton {\r\n  width: 100%;\r\n  padding: 10px;\r\n  background-color: #42b983;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n}\r\n\r\nbutton:hover {\r\n  background-color: #3aa876;\r\n}\r\n\r\n.error {\r\n  color: red;\r\n  margin-top: 1rem;\r\n}\r\n\r\n.success-message {\r\n  color: #42b983;\r\n  text-align: center;\r\n  margin-top: 1rem;\r\n}\r\n</style>\r\n"],"mappings":";AA6CA,OAAOA,OAAM,MAAO,iBAAgB;AACpC,SAASC,SAAS,EAAEC,QAAO,QAAS,YAAW;AAC/C,SAASC,GAAG,EAAEC,SAAQ,QAAS,KAAI;AAEnC,eAAe;EACbC,KAAKA,CAAA,EAAG;IACN,MAAMC,MAAK,GAAIL,SAAS,CAAC;IACzB,MAAMM,KAAI,GAAIL,QAAQ,CAAC;IAEvB,OAAO;MACLM,KAAK,EAAED,KAAK,CAACE,MAAM,CAACD;IACtB;EACF,CAAC;EACDE,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,KAAK,EAAE,EAAE;MACTC,IAAI,EAAE,CAAC;MACPC,YAAY,EAAE,EAAE;MAChBC,cAAc,EAAE,EAAE;MAClBC,WAAW,EAAE,EAAE;MACfC,eAAe,EAAE;IACnB;EACF,CAAC;EACDC,OAAO,EAAE;IACP,MAAMC,YAAYA,CAAA,EAAG;MACnB,IAAI;QACF,MAAMC,QAAO,GAAI,IAAIC,QAAQ,CAAC;QAC9BD,QAAQ,CAACE,MAAM,CAAC,OAAO,EAAE,IAAI,CAACV,KAAK;QAEnC,MAAMX,OAAO,CAACsB,IAAI,CAAC,6BAA6B,EAAEH,QAAQ,EAAE;UAC1DI,OAAO,EAAE;YAAE,cAAc,EAAE;UAAsB;QACnD,CAAC;QAED,IAAI,CAACX,IAAG,GAAI;QACZ,IAAI,CAACC,YAAW,GAAI,EAAC;MACvB,EAAE,OAAOW,KAAK,EAAE;QAAA,IAAAC,eAAA;QACd,IAAI,CAACZ,YAAW,GAAI,EAAAY,eAAA,GAAAD,KAAK,CAACE,QAAQ,cAAAD,eAAA,gBAAAA,eAAA,GAAdA,eAAA,CAAgBf,IAAI,cAAAe,eAAA,uBAApBA,eAAA,CAAsBE,MAAK,KAAK,mBAAkB;MACxE;IACF,CAAC;IAED,MAAMC,aAAaA,CAAA,EAAG;MACpB,IAAI,IAAI,CAACb,WAAU,KAAM,IAAI,CAACC,eAAe,EAAE;QAC7C,IAAI,CAACH,YAAW,GAAI,wBAAuB;QAC3C;MACF;MAEA,IAAI;QACF,MAAMM,QAAO,GAAI,IAAIC,QAAQ,CAAC;QAC9BD,QAAQ,CAACE,MAAM,CAAC,cAAc,EAAE,IAAI,CAACN,WAAW;QAEhD,MAAMf,OAAO,CAACsB,IAAI,CAAC,uBAAuB,IAAI,CAACd,KAAK,EAAE,EAAEW,QAAQ,EAAE;UAChEI,OAAO,EAAE;YAAE,cAAc,EAAE;UAAsB;QACnD,CAAC;QAED,IAAI,CAACT,cAAa,GAAI,sCAAqC;QAC3D;QACAe,UAAU,CAAC,MAAM;UACf,IAAI,CAACC,OAAO,CAACC,IAAI,CAAC,QAAQ;QAC5B,CAAC,EAAE,IAAI;MACT,EAAE,OAAOP,KAAK,EAAE;QAAA,IAAAQ,gBAAA;QACd,IAAI,CAACnB,YAAW,GAAI,EAAAmB,gBAAA,GAAAR,KAAK,CAACE,QAAQ,cAAAM,gBAAA,gBAAAA,gBAAA,GAAdA,gBAAA,CAAgBtB,IAAI,cAAAsB,gBAAA,uBAApBA,gBAAA,CAAsBL,MAAK,KAAK,0BAAyB;MAC/E;IACF;EACF;AACF","ignoreList":[]}]}