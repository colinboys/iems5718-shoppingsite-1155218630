{"remainingRequest":"D:\\IEMS5718web\\shop_demo\\node_modules\\thread-loader\\dist\\cjs.js!D:\\IEMS5718web\\shop_demo\\node_modules\\babel-loader\\lib\\index.js!D:\\IEMS5718web\\shop_demo\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\IEMS5718web\\shop_demo\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!D:\\IEMS5718web\\shop_demo\\src\\App.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\IEMS5718web\\shop_demo\\src\\App.vue","mtime":1746349569479},{"path":"D:\\IEMS5718web\\shop_demo\\babel.config.js","mtime":1738482584419},{"path":"D:\\IEMS5718web\\shop_demo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746349774639},{"path":"D:\\IEMS5718web\\shop_demo\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1746349774611},{"path":"D:\\IEMS5718web\\shop_demo\\node_modules\\babel-loader\\lib\\index.js","mtime":1746349776751},{"path":"D:\\IEMS5718web\\shop_demo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746349774639},{"path":"D:\\IEMS5718web\\shop_demo\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1746349777201}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCBGb290ZXIgZnJvbSAiLi9jb21wb25lbnRzL0Zvb3Rlci52dWUiOwppbXBvcnQgeyBtYXBHZXR0ZXJzLCBtYXBBY3Rpb25zIH0gZnJvbSAndnVleCc7CmltcG9ydCB7IHVzZVN0b3JlIH0gZnJvbSAndnVleCc7CmltcG9ydCB7IG9uTW91bnRlZCB9IGZyb20gJ3Z1ZSc7CmltcG9ydCByZXF1ZXN0IGZyb20gJ0AvdXRpbHMvcmVxdWVzdCc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQXBwIiwKICBjb21wb25lbnRzOiB7CiAgICBGb290ZXIKICB9LAogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBHZXR0ZXJzKFsnaXNMb2dnZWRJbicsICd1c2VybmFtZScsICdpc0FkbWluJ10pCiAgfSwKICBtZXRob2RzOiB7CiAgICAuLi5tYXBBY3Rpb25zKFsnbG9nb3V0J10pLAogICAgYXN5bmMgaGFuZGxlTG9nb3V0KCkgewogICAgICB0cnkgewogICAgICAgIGF3YWl0IHJlcXVlc3QucG9zdCgnL2FwaS9sb2dvdXQnKTsKICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnYXV0aF90b2tlbicpOwogICAgICAgIHRoaXMubG9nb3V0KCk7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy8nKTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCdMb2dvdXQgZmFpbGVkOicsIGVycm9yKTsKICAgICAgfQogICAgfQogIH0sCiAgc2V0dXAoKSB7CiAgICBjb25zdCBzdG9yZSA9IHVzZVN0b3JlKCk7CiAgICBvbk1vdW50ZWQoKCkgPT4gewogICAgICAvLyDku44gbG9jYWxTdG9yYWdlIOaBouWkjeeZu+W9leeKtuaAgQogICAgICBjb25zdCB1c2VybmFtZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VybmFtZScpOwogICAgICBjb25zdCBpc0FkbWluID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2lzQWRtaW4nKSA9PT0gJ3RydWUnOwogICAgICBjb25zdCB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdhdXRoX3Rva2VuJyk7CiAgICAgIGlmICh0b2tlbiAmJiB1c2VybmFtZSkgewogICAgICAgIHN0b3JlLmRpc3BhdGNoKCdsb2dpbicsIHsKICAgICAgICAgIHVzZXJuYW1lLAogICAgICAgICAgaXNBZG1pbgogICAgICAgIH0pOwogICAgICB9CiAgICB9KTsKICB9Cn07"},{"version":3,"names":["Footer","mapGetters","mapActions","useStore","onMounted","request","name","components","computed","methods","handleLogout","post","localStorage","removeItem","logout","$router","push","error","console","setup","store","username","getItem","isAdmin","token","dispatch"],"sources":["D:\\IEMS5718web\\shop_demo\\src\\App.vue"],"sourcesContent":["<template>\n  <div id=\"nav\">\n    <template v-if = \"!isAdmin\">\n      <router-link to=\"/\">Home</router-link> |\n    <router-link to=\"/about\">About</router-link> |\n    </template>\n    \n    <template v-if=\"isLoggedIn\">\n      <router-link v-if=\"isAdmin\" to=\"/admin\">Admin Panel  | </router-link>\n      <!-- <router-link to=\"/change-password\">Change Password</router-link> | -->\n      <router-link v-if=\"!isAdmin\" to=\"/orders\">Orders | </router-link>\n      <a href=\"#\" @click.prevent=\"handleLogout\">Logout</a>\n    </template>\n    <template v-else>\n      <router-link to=\"/login\">Login</router-link>\n    </template>\n  </div>\n  <span>Welcome, {{ username || 'Guest' }}!</span>\n  <div id=\"app\">\n    <router-view/>\n    <Footer />\n  </div>\n</template>\n\n<script>\nimport Footer from \"./components/Footer.vue\";\nimport { mapGetters, mapActions } from 'vuex';\nimport { useStore } from 'vuex';\nimport { onMounted } from 'vue';\nimport request from '@/utils/request';\n\nexport default {\n  name: \"App\",\n  components: { Footer },\n  computed: {\n    ...mapGetters(['isLoggedIn', 'username', 'isAdmin'])\n  },\n  methods: {\n    ...mapActions(['logout']),\n    async handleLogout() {\n      try {\n        await request.post('/api/logout');\n        localStorage.removeItem('auth_token');\n        this.logout();\n        this.$router.push('/');\n      } catch (error) {\n        console.error('Logout failed:', error);\n      }\n    }\n  },\n  setup() {\n    const store = useStore();\n\n    onMounted(() => {\n      // 从 localStorage 恢复登录状态\n      const username = localStorage.getItem('username');\n      const isAdmin = localStorage.getItem('isAdmin') === 'true';\n      const token = localStorage.getItem('auth_token');\n      \n      if (token && username) {\n        store.dispatch('login', {\n          username,\n          isAdmin\n        });\n      }\n    });\n  }\n};\n</script>\n\n<style>\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n}\n\n#nav {\n  padding: 30px;\n}\n\n#nav a {\n  font-weight: bold;\n  color: #2c3e50;\n}\n\n#nav a.router-link-exact-active {\n  color: #42b983;\n}\n</style>\n"],"mappings":";AAyBA,OAAOA,MAAK,MAAO,yBAAyB;AAC5C,SAASC,UAAU,EAAEC,UAAS,QAAS,MAAM;AAC7C,SAASC,QAAO,QAAS,MAAM;AAC/B,SAASC,SAAQ,QAAS,KAAK;AAC/B,OAAOC,OAAM,MAAO,iBAAiB;AAErC,eAAe;EACbC,IAAI,EAAE,KAAK;EACXC,UAAU,EAAE;IAAEP;EAAO,CAAC;EACtBQ,QAAQ,EAAE;IACR,GAAGP,UAAU,CAAC,CAAC,YAAY,EAAE,UAAU,EAAE,SAAS,CAAC;EACrD,CAAC;EACDQ,OAAO,EAAE;IACP,GAAGP,UAAU,CAAC,CAAC,QAAQ,CAAC,CAAC;IACzB,MAAMQ,YAAYA,CAAA,EAAG;MACnB,IAAI;QACF,MAAML,OAAO,CAACM,IAAI,CAAC,aAAa,CAAC;QACjCC,YAAY,CAACC,UAAU,CAAC,YAAY,CAAC;QACrC,IAAI,CAACC,MAAM,CAAC,CAAC;QACb,IAAI,CAACC,OAAO,CAACC,IAAI,CAAC,GAAG,CAAC;MACxB,EAAE,OAAOC,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,gBAAgB,EAAEA,KAAK,CAAC;MACxC;IACF;EACF,CAAC;EACDE,KAAKA,CAAA,EAAG;IACN,MAAMC,KAAI,GAAIjB,QAAQ,CAAC,CAAC;IAExBC,SAAS,CAAC,MAAM;MACd;MACA,MAAMiB,QAAO,GAAIT,YAAY,CAACU,OAAO,CAAC,UAAU,CAAC;MACjD,MAAMC,OAAM,GAAIX,YAAY,CAACU,OAAO,CAAC,SAAS,MAAM,MAAM;MAC1D,MAAME,KAAI,GAAIZ,YAAY,CAACU,OAAO,CAAC,YAAY,CAAC;MAEhD,IAAIE,KAAI,IAAKH,QAAQ,EAAE;QACrBD,KAAK,CAACK,QAAQ,CAAC,OAAO,EAAE;UACtBJ,QAAQ;UACRE;QACF,CAAC,CAAC;MACJ;IACF,CAAC,CAAC;EACJ;AACF,CAAC","ignoreList":[]}]}