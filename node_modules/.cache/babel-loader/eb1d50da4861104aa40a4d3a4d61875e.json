{"remainingRequest":"D:\\IEMS5718web\\shop_demo\\node_modules\\babel-loader\\lib\\index.js!D:\\IEMS5718web\\shop_demo\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\IEMS5718web\\shop_demo\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!D:\\IEMS5718web\\shop_demo\\src\\views\\CategoryAdmin.vue?vue&type=script&setup=true&lang=js","dependencies":[{"path":"D:\\IEMS5718web\\shop_demo\\src\\views\\CategoryAdmin.vue","mtime":1746348736135},{"path":"D:\\IEMS5718web\\shop_demo\\babel.config.js","mtime":1738482584419},{"path":"D:\\IEMS5718web\\shop_demo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746349774639},{"path":"D:\\IEMS5718web\\shop_demo\\node_modules\\babel-loader\\lib\\index.js","mtime":1746349776751},{"path":"D:\\IEMS5718web\\shop_demo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746349774639},{"path":"D:\\IEMS5718web\\shop_demo\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1746349777201}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgcmVmLCBjb21wdXRlZCwgb25Nb3VudGVkIH0gZnJvbSAndnVlJzsKaW1wb3J0IHJlcXVlc3QgZnJvbSAnQC91dGlscy9yZXF1ZXN0JzsKCi8vIOaVsOaNrueKtuaAgQoKZXhwb3J0IGRlZmF1bHQgewogIF9fbmFtZTogJ0NhdGVnb3J5QWRtaW4nLAogIHNldHVwKF9fcHJvcHMsIHsKICAgIGV4cG9zZTogX19leHBvc2UKICB9KSB7CiAgICBfX2V4cG9zZSgpOwogICAgY29uc3QgY2F0ZWdvcmllcyA9IHJlZihbXSk7CiAgICBjb25zdCBzaG93RGlhbG9nID0gcmVmKGZhbHNlKTsKICAgIGNvbnN0IGZvcm1EYXRhID0gcmVmKHsKICAgICAgbmFtZTogJycKICAgIH0pOwogICAgY29uc3QgY3VycmVudElkID0gcmVmKG51bGwpOwogICAgY29uc3QgaXNFZGl0TW9kZSA9IHJlZihmYWxzZSk7CgogICAgLy8g6K6h566X5bGe5oCnCiAgICBjb25zdCBkaWFsb2dUaXRsZSA9IGNvbXB1dGVkKCgpID0+IGlzRWRpdE1vZGUudmFsdWUgPyAnRWRpdCBDYXRlZ29yeScgOiAnQWRkIENhdGVnb3J5Jyk7CgogICAgLy8g5Yqg6L295pWw5o2uCiAgICBjb25zdCBsb2FkRGF0YSA9IGFzeW5jICgpID0+IHsKICAgICAgLy8gY29uc3QgcmVzID0gYXdhaXQgYXhpb3MuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjgwMDAvYXBpL2NhdGVnb3JpZXMnKQogICAgICBjb25zdCByZXMgPSBhd2FpdCByZXF1ZXN0LmdldCgnL2FwaS9jYXRlZ29yaWVzJyk7CiAgICAgIGNhdGVnb3JpZXMudmFsdWUgPSByZXMuZGF0YTsKICAgIH07CgogICAgLy8g5pi+56S65Yib5bu65by556qXCiAgICBjb25zdCBzaG93Q3JlYXRlRGlhbG9nID0gKCkgPT4gewogICAgICBpc0VkaXRNb2RlLnZhbHVlID0gZmFsc2U7CiAgICAgIGZvcm1EYXRhLnZhbHVlID0gewogICAgICAgIG5hbWU6ICcnCiAgICAgIH07CiAgICAgIHNob3dEaWFsb2cudmFsdWUgPSB0cnVlOwogICAgfTsKCiAgICAvLyDmmL7npLrnvJbovpHlvLnnqpcKICAgIGNvbnN0IHNob3dFZGl0RGlhbG9nID0gaXRlbSA9PiB7CiAgICAgIGlzRWRpdE1vZGUudmFsdWUgPSB0cnVlOwogICAgICBmb3JtRGF0YS52YWx1ZSA9IHsKICAgICAgICAuLi5pdGVtCiAgICAgIH07CiAgICAgIGN1cnJlbnRJZC52YWx1ZSA9IGl0ZW0uY2F0aWQ7CiAgICAgIHNob3dEaWFsb2cudmFsdWUgPSB0cnVlOwogICAgfTsKCiAgICAvLyDmj5DkuqTooajljZUKICAgIGNvbnN0IHN1Ym1pdEZvcm0gPSBhc3luYyAoKSA9PiB7CiAgICAgIHRyeSB7CiAgICAgICAgaWYgKGlzRWRpdE1vZGUudmFsdWUpIHsKICAgICAgICAgIGF3YWl0IHJlcXVlc3QucHV0KGAvYXBpL2NhdGVnb3JpZXMvJHtjdXJyZW50SWQudmFsdWV9YCwgZm9ybURhdGEudmFsdWUsIHsKICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogYCR7bG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2F1dGhfdG9rZW4nKX1gCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgICAgLy8gYXdhaXQgYXhpb3MucHV0KGBodHRwOi8vbG9jYWxob3N0OjgwMDAvYXBpL2NhdGVnb3JpZXMvJHtjdXJyZW50SWQudmFsdWV9YCwgZm9ybURhdGEudmFsdWUpCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGF3YWl0IHJlcXVlc3QucG9zdCgnL2FwaS9jYXRlZ29yaWVzJywgZm9ybURhdGEudmFsdWUsIHsKICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogYCR7bG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2F1dGhfdG9rZW4nKX1gCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgICAgLy8gYXdhaXQgYXhpb3MucG9zdCgnaHR0cDovL2xvY2FsaG9zdDo4MDAwL2FwaS9jYXRlZ29yaWVzJywgZm9ybURhdGEudmFsdWUpCiAgICAgICAgfQogICAgICAgIGF3YWl0IGxvYWREYXRhKCk7CiAgICAgICAgY2xvc2VEaWFsb2coKTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCfmk43kvZzlpLHotKU6JywgZXJyb3IpOwogICAgICB9CiAgICB9OwoKICAgIC8vIOWIoOmZpOadoeebrgogICAgY29uc3QgZGVsZXRlSXRlbSA9IGFzeW5jIGlkID0+IHsKICAgICAgaWYgKGNvbmZpcm0oJ+ehruWumuimgeWIoOmZpOivpeWIhuexu+WQl++8nycpKSB7CiAgICAgICAgLy8gYXdhaXQgYXhpb3MuZGVsZXRlKGBodHRwOi8vbG9jYWxob3N0OjgwMDAvYXBpL2NhdGVnb3JpZXMvJHtpZH1gKQogICAgICAgIGF3YWl0IHJlcXVlc3QuZGVsZXRlKGAvYXBpL2NhdGVnb3JpZXMvJHtpZH1gLCB7CiAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogYCR7bG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2F1dGhfdG9rZW4nKX1gCiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgYXdhaXQgbG9hZERhdGEoKTsKICAgICAgfQogICAgfTsKCiAgICAvLyDlhbPpl63lvLnnqpcKICAgIGNvbnN0IGNsb3NlRGlhbG9nID0gKCkgPT4gewogICAgICBzaG93RGlhbG9nLnZhbHVlID0gZmFsc2U7CiAgICB9OwogICAgb25Nb3VudGVkKGxvYWREYXRhKTsKICAgIGNvbnN0IF9fcmV0dXJuZWRfXyA9IHsKICAgICAgY2F0ZWdvcmllcywKICAgICAgc2hvd0RpYWxvZywKICAgICAgZm9ybURhdGEsCiAgICAgIGN1cnJlbnRJZCwKICAgICAgaXNFZGl0TW9kZSwKICAgICAgZGlhbG9nVGl0bGUsCiAgICAgIGxvYWREYXRhLAogICAgICBzaG93Q3JlYXRlRGlhbG9nLAogICAgICBzaG93RWRpdERpYWxvZywKICAgICAgc3VibWl0Rm9ybSwKICAgICAgZGVsZXRlSXRlbSwKICAgICAgY2xvc2VEaWFsb2csCiAgICAgIHJlZiwKICAgICAgY29tcHV0ZWQsCiAgICAgIG9uTW91bnRlZCwKICAgICAgZ2V0IHJlcXVlc3QoKSB7CiAgICAgICAgcmV0dXJuIHJlcXVlc3Q7CiAgICAgIH0KICAgIH07CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoX19yZXR1cm5lZF9fLCAnX19pc1NjcmlwdFNldHVwJywgewogICAgICBlbnVtZXJhYmxlOiBmYWxzZSwKICAgICAgdmFsdWU6IHRydWUKICAgIH0pOwogICAgcmV0dXJuIF9fcmV0dXJuZWRfXzsKICB9Cn07"},{"version":3,"names":["ref","computed","onMounted","request","categories","showDialog","formData","name","currentId","isEditMode","dialogTitle","value","loadData","res","get","data","showCreateDialog","showEditDialog","item","catid","submitForm","put","headers","localStorage","getItem","post","closeDialog","error","console","deleteItem","id","confirm","delete"],"sources":["D:/IEMS5718web/shop_demo/src/views/CategoryAdmin.vue"],"sourcesContent":["<!-- CategoryAdmin.vue -->\r\n<template>\r\n    <div class=\"admin-container\">\r\n      <!-- 操作按钮组 -->\r\n      <div class=\"action-bar\">\r\n        <button class=\"btn primary\" @click=\"showCreateDialog\">Add Category</button>\r\n      </div>\r\n  \r\n      <!-- 数据表格 -->\r\n      <table class=\"data-table\">\r\n        <thead>\r\n          <tr>\r\n            <th>ID</th>\r\n            <th>Name</th>\r\n            <th>Operation</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr v-for=\"item in categories\" :key=\"item.catid\">\r\n            <td>{{ item.catid }}</td>\r\n            <td>{{ item.name }}</td>\r\n            <td class=\"actions\">\r\n              <button class=\"btn edit\" @click=\"showEditDialog(item)\">Edit</button>\r\n              <button class=\"btn danger\" @click=\"deleteItem(item.catid)\">Delete</button>\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n  \r\n      <!-- 弹窗 -->\r\n      <div v-if=\"showDialog\" class=\"modal\">\r\n        <div class=\"modal-content\">\r\n          <h3>{{ dialogTitle }}</h3>\r\n          <form @submit.prevent=\"submitForm\">\r\n            <div class=\"form-group\">\r\n              <label>Category Name</label>\r\n              <input \r\n                type=\"text\" \r\n                v-model=\"formData.name\" \r\n                required\r\n                class=\"form-input\"\r\n              >\r\n            </div>\r\n            <div class=\"form-actions\">\r\n              <button type=\"button\" class=\"btn\" @click=\"closeDialog\">取消</button>\r\n              <button type=\"submit\" class=\"btn primary\">提交</button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </template>\r\n  \r\n  <script setup>\r\n  import { ref, computed, onMounted } from 'vue'\r\n  import request from '@/utils/request'\r\n\r\n\r\n  // 数据状态\r\n  const categories = ref([])\r\n  const showDialog = ref(false)\r\n  const formData = ref({ name: '' })\r\n  const currentId = ref(null)\r\n  const isEditMode = ref(false)\r\n  \r\n  // 计算属性\r\n  const dialogTitle = computed(() => \r\n    isEditMode.value ? 'Edit Category' : 'Add Category'\r\n  )\r\n  \r\n  // 加载数据\r\n  const loadData = async () => {\r\n    // const res = await axios.get('http://localhost:8000/api/categories')\r\n    const res = await request.get('/api/categories')\r\n    categories.value = res.data\r\n  }\r\n \r\n  // 显示创建弹窗\r\n  const showCreateDialog = () => {\r\n    isEditMode.value = false\r\n    formData.value = { name: '' }\r\n    showDialog.value = true\r\n  }\r\n  \r\n  // 显示编辑弹窗\r\n  const showEditDialog = (item) => {\r\n    isEditMode.value = true\r\n    formData.value = { ...item }\r\n    currentId.value = item.catid\r\n    showDialog.value = true\r\n  }\r\n  \r\n  // 提交表单\r\n  const submitForm = async () => {\r\n    try {\r\n      if (isEditMode.value) {\r\n        await request.put(`/api/categories/${currentId.value}`, formData.value, {\r\n      headers: { 'Authorization': `${localStorage.getItem('auth_token')}` }\r\n    })\r\n        // await axios.put(`http://localhost:8000/api/categories/${currentId.value}`, formData.value)\r\n      } else {\r\n        await request.post('/api/categories', formData.value, {\r\n      headers: { 'Authorization': `${localStorage.getItem('auth_token')}` }\r\n    })\r\n        // await axios.post('http://localhost:8000/api/categories', formData.value)\r\n      }\r\n      await loadData()\r\n      closeDialog()\r\n    } catch (error) {\r\n      console.error('操作失败:', error)\r\n    }\r\n  }\r\n  \r\n  // 删除条目\r\n  const deleteItem = async (id) => {\r\n    if (confirm('确定要删除该分类吗？')) {\r\n      // await axios.delete(`http://localhost:8000/api/categories/${id}`)\r\n      await request.delete(`/api/categories/${id}`, {\r\n      headers: { 'Authorization': `${localStorage.getItem('auth_token')}` }\r\n    })\r\n      await loadData()\r\n    }\r\n  }\r\n  \r\n  // 关闭弹窗\r\n  const closeDialog = () => {\r\n    showDialog.value = false\r\n  }\r\n  \r\n  onMounted(loadData)\r\n  </script>\r\n  \r\n  <style scoped>\r\n  /* 基础样式 */\r\n  .admin-container {\r\n    padding: 20px;\r\n    max-width: 1000px;\r\n    margin: 0 auto;\r\n  }\r\n  \r\n  .data-table {\r\n    width: 100%;\r\n    border-collapse: collapse;\r\n    margin-top: 20px;\r\n  }\r\n  \r\n  .data-table th,\r\n  .data-table td {\r\n    padding: 12px;\r\n    border: 1px solid #ddd;\r\n    text-align: left;\r\n  }\r\n  \r\n  .data-table th {\r\n    background-color: #f5f5f5;\r\n  }\r\n  \r\n  .actions {\r\n    min-width: 150px;\r\n  }\r\n  \r\n  .btn {\r\n    padding: 8px 16px;\r\n    border-radius: 4px;\r\n    cursor: pointer;\r\n    margin: 0 4px;\r\n    transition: all 0.3s;\r\n  }\r\n  \r\n  .btn.primary {\r\n    background-color: #409eff;\r\n    color: white;\r\n    border: 1px solid #409eff;\r\n  }\r\n  \r\n  .btn.edit {\r\n    background-color: #e6a23c;\r\n    color: white;\r\n    border: 1px solid #e6a23c;\r\n  }\r\n  \r\n  .btn.danger {\r\n    background-color: #f56c6c;\r\n    color: white;\r\n    border: 1px solid #f56c6c;\r\n  }\r\n  \r\n  /* 模态框样式 */\r\n  .modal {\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    background: rgba(0,0,0,0.5);\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  \r\n  .modal-content {\r\n    background: white;\r\n    padding: 24px;\r\n    border-radius: 8px;\r\n    min-width: 400px;\r\n  }\r\n  \r\n  .form-group {\r\n    margin-bottom: 16px;\r\n  }\r\n  \r\n  .form-input {\r\n    width: 100%;\r\n    padding: 8px;\r\n    border: 1px solid #ddd;\r\n    border-radius: 4px;\r\n  }\r\n  \r\n  .form-actions {\r\n    margin-top: 20px;\r\n    text-align: right;\r\n  }\r\n  </style>"],"mappings":"AAsDE,SAASA,GAAG,EAAEC,QAAQ,EAAEC,SAAS,QAAQ,KAAK;AAC9C,OAAOC,OAAO,MAAM,iBAAiB;;AAGrC;;;;;;;;IACA,MAAMC,UAAU,GAAGJ,GAAG,CAAC,EAAE,CAAC;IAC1B,MAAMK,UAAU,GAAGL,GAAG,CAAC,KAAK,CAAC;IAC7B,MAAMM,QAAQ,GAAGN,GAAG,CAAC;MAAEO,IAAI,EAAE;IAAG,CAAC,CAAC;IAClC,MAAMC,SAAS,GAAGR,GAAG,CAAC,IAAI,CAAC;IAC3B,MAAMS,UAAU,GAAGT,GAAG,CAAC,KAAK,CAAC;;IAE7B;IACA,MAAMU,WAAW,GAAGT,QAAQ,CAAC,MAC3BQ,UAAU,CAACE,KAAK,GAAG,eAAe,GAAG,cACvC,CAAC;;IAED;IACA,MAAMC,QAAQ,GAAG,MAAAA,CAAA,KAAY;MAC3B;MACA,MAAMC,GAAG,GAAG,MAAMV,OAAO,CAACW,GAAG,CAAC,iBAAiB,CAAC;MAChDV,UAAU,CAACO,KAAK,GAAGE,GAAG,CAACE,IAAI;IAC7B,CAAC;;IAED;IACA,MAAMC,gBAAgB,GAAGA,CAAA,KAAM;MAC7BP,UAAU,CAACE,KAAK,GAAG,KAAK;MACxBL,QAAQ,CAACK,KAAK,GAAG;QAAEJ,IAAI,EAAE;MAAG,CAAC;MAC7BF,UAAU,CAACM,KAAK,GAAG,IAAI;IACzB,CAAC;;IAED;IACA,MAAMM,cAAc,GAAIC,IAAI,IAAK;MAC/BT,UAAU,CAACE,KAAK,GAAG,IAAI;MACvBL,QAAQ,CAACK,KAAK,GAAG;QAAE,GAAGO;MAAK,CAAC;MAC5BV,SAAS,CAACG,KAAK,GAAGO,IAAI,CAACC,KAAK;MAC5Bd,UAAU,CAACM,KAAK,GAAG,IAAI;IACzB,CAAC;;IAED;IACA,MAAMS,UAAU,GAAG,MAAAA,CAAA,KAAY;MAC7B,IAAI;QACF,IAAIX,UAAU,CAACE,KAAK,EAAE;UACpB,MAAMR,OAAO,CAACkB,GAAG,CAAC,mBAAmBb,SAAS,CAACG,KAAK,EAAE,EAAEL,QAAQ,CAACK,KAAK,EAAE;YAC1EW,OAAO,EAAE;cAAE,eAAe,EAAE,GAAGC,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC;YAAG;UACtE,CAAC,CAAC;UACE;QACF,CAAC,MAAM;UACL,MAAMrB,OAAO,CAACsB,IAAI,CAAC,iBAAiB,EAAEnB,QAAQ,CAACK,KAAK,EAAE;YACxDW,OAAO,EAAE;cAAE,eAAe,EAAE,GAAGC,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC;YAAG;UACtE,CAAC,CAAC;UACE;QACF;QACA,MAAMZ,QAAQ,CAAC,CAAC;QAChBc,WAAW,CAAC,CAAC;MACf,CAAC,CAAC,OAAOC,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,OAAO,EAAEA,KAAK,CAAC;MAC/B;IACF,CAAC;;IAED;IACA,MAAME,UAAU,GAAG,MAAOC,EAAE,IAAK;MAC/B,IAAIC,OAAO,CAAC,YAAY,CAAC,EAAE;QACzB;QACA,MAAM5B,OAAO,CAAC6B,MAAM,CAAC,mBAAmBF,EAAE,EAAE,EAAE;UAC9CR,OAAO,EAAE;YAAE,eAAe,EAAE,GAAGC,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC;UAAG;QACtE,CAAC,CAAC;QACA,MAAMZ,QAAQ,CAAC,CAAC;MAClB;IACF,CAAC;;IAED;IACA,MAAMc,WAAW,GAAGA,CAAA,KAAM;MACxBrB,UAAU,CAACM,KAAK,GAAG,KAAK;IAC1B,CAAC;IAEDT,SAAS,CAACU,QAAQ,CAAC","ignoreList":[]}]}