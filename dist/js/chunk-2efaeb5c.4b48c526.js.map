{"version":3,"sources":["webpack:///./src/views/ResetPassword.vue","webpack:///./src/views/ResetPassword.vue?1d02","webpack:///./src/views/ResetPassword.vue?61c7"],"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","$setup","token","_hoisted_7","onSubmit","_cache","_withModifiers","args","$options","resetPassword","_hoisted_8","$data","newPassword","$event","type","required","_hoisted_9","confirmPassword","_hoisted_3","step","_hoisted_4","requestReset","_hoisted_5","email","_hoisted_6","errorMessage","_hoisted_10","_toDisplayString","successMessage","_hoisted_11","setup","useRouter","route","useRoute","params","data","methods","formData","FormData","append","this","request","post","headers","error","_error$response","response","detail","setTimeout","$router","push","_error$response2","__exports__","render"],"mappings":"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","file":"js/chunk-2efaeb5c.4b48c526.js","sourcesContent":["<template>\r\n  <div class=\"reset-password\">\r\n    <div class=\"form-container\">\r\n      <!-- 输入邮箱请求重置页面 -->\r\n      <div v-if=\"!token\">\r\n        <h2>Reset Password</h2>\r\n        <div v-if=\"step === 1\">\r\n          <form @submit.prevent=\"requestReset\">\r\n            <div class=\"form-group\">\r\n              <label>Email Address</label>\r\n              <input v-model=\"email\" type=\"email\" required />\r\n            </div>\r\n            <button type=\"submit\">Send Reset Link</button>\r\n          </form>\r\n        </div>\r\n        <div v-if=\"step === 2\">\r\n          <p class=\"success-message\">\r\n            If an account exists with this email, you will receive a password reset link.\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 重置密码页面 -->\r\n      <div v-else>\r\n        <h2>Set New Password</h2>\r\n        <form @submit.prevent=\"resetPassword\">\r\n          <div class=\"form-group\">\r\n            <label>New Password</label>\r\n            <input v-model=\"newPassword\" type=\"password\" required />\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label>Confirm Password</label>\r\n            <input v-model=\"confirmPassword\" type=\"password\" required />\r\n          </div>\r\n          <button type=\"submit\">Reset Password</button>\r\n        </form>\r\n      </div>\r\n\r\n      <p v-if=\"errorMessage\" class=\"error\">{{ errorMessage }}</p>\r\n      <p v-if=\"successMessage\" class=\"success-message\">{{ successMessage }}</p>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport request from '@/utils/request'\r\nimport { useRouter, useRoute } from 'vue-router'\r\nimport { ref, onMounted } from 'vue'\r\n\r\nexport default {\r\n  setup() {\r\n    const router = useRouter()\r\n    const route = useRoute()\r\n    \r\n    return {\r\n      token: route.params.token\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      email: '',\r\n      step: 1,\r\n      errorMessage: '',\r\n      successMessage: '',\r\n      newPassword: '',\r\n      confirmPassword: ''\r\n    }\r\n  },\r\n  methods: {\r\n    async requestReset() {\r\n      try {\r\n        const formData = new FormData()\r\n        formData.append('email', this.email)\r\n        \r\n        await request.post('/api/reset-password-request', formData, {\r\n          headers: { 'Content-Type': 'multipart/form-data' }\r\n        })\r\n        \r\n        this.step = 2\r\n        this.errorMessage = ''\r\n      } catch (error) {\r\n        this.errorMessage = error.response?.data?.detail || 'An error occurred'\r\n      }\r\n    },\r\n    \r\n    async resetPassword() {\r\n      if (this.newPassword !== this.confirmPassword) {\r\n        this.errorMessage = 'Passwords do not match'\r\n        return\r\n      }\r\n\r\n      try {\r\n        const formData = new FormData()\r\n        formData.append('new_password', this.newPassword)\r\n        \r\n        await request.post(`/api/reset-password/${this.token}`, formData, {\r\n          headers: { 'Content-Type': 'multipart/form-data' }\r\n        })\r\n        \r\n        this.successMessage = 'Password has been reset successfully'\r\n        // 3秒后跳转到登录页\r\n        setTimeout(() => {\r\n          this.$router.push('/login')\r\n        }, 3000)\r\n      } catch (error) {\r\n        this.errorMessage = error.response?.data?.detail || 'Failed to reset password'\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.reset-password {\r\n  max-width: 400px;\r\n  margin: 2rem auto;\r\n  padding: 2rem;\r\n}\r\n\r\n.form-container {\r\n  background-color: #fff;\r\n  padding: 20px;\r\n  border-radius: 8px;\r\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.form-group {\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.form-group label {\r\n  display: block;\r\n  margin-bottom: 0.5rem;\r\n}\r\n\r\n.form-group input {\r\n  width: 100%;\r\n  padding: 8px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  margin-bottom: 15px;\r\n}\r\n\r\nbutton {\r\n  width: 100%;\r\n  padding: 10px;\r\n  background-color: #42b983;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n}\r\n\r\nbutton:hover {\r\n  background-color: #3aa876;\r\n}\r\n\r\n.error {\r\n  color: red;\r\n  margin-top: 1rem;\r\n}\r\n\r\n.success-message {\r\n  color: #42b983;\r\n  text-align: center;\r\n  margin-top: 1rem;\r\n}\r\n</style>\r\n","import { render } from \"./ResetPassword.vue?vue&type=template&id=44fdf3cb&scoped=true\"\nimport script from \"./ResetPassword.vue?vue&type=script&lang=js\"\nexport * from \"./ResetPassword.vue?vue&type=script&lang=js\"\n\nimport \"./ResetPassword.vue?vue&type=style&index=0&id=44fdf3cb&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\IEMS5718web\\\\shop_demo\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-44fdf3cb\"]])\n\nexport default __exports__","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./ResetPassword.vue?vue&type=style&index=0&id=44fdf3cb&scoped=true&lang=css\""],"sourceRoot":""}