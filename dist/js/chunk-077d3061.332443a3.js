(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-077d3061"],{"859e":function(e,t,a){"use strict";a("c86c")},a55b:function(e,t,a){"use strict";a.r(t);a("14d9");var l=a("7a23"),c=a("6605"),o=a("5502"),n=a("b775");const r={class:"auth-container"},s={class:"form-container"},i={key:0},d={key:1},u={class:"form-group"},b={key:0,class:"form-group"},m={class:"form-group"},p={key:1,class:"form-group"},v={type:"submit"},j={key:2,class:"error"},O={class:"reset-link"};var g={__name:"Login",setup(e){const t=Object(l["ref"])(""),a=Object(l["ref"])(""),g=Object(l["ref"])(""),k=Object(l["ref"])(""),f=Object(l["ref"])(""),w=Object(l["ref"])(!0),V=Object(c["d"])(),E=Object(o["d"])(),h=()=>{w.value=!w.value,f.value=""},N=async()=>{try{const e=await n["a"].post("/api/login",{email:t.value,password:g.value});localStorage.setItem("auth_token",e.data.token),localStorage.setItem("username",e.data.username),localStorage.setItem("isAdmin",e.data.is_admin),E.dispatch("login",{username:e.data.username,isAdmin:e.data.is_admin}),e.data.is_admin?V.push("/admin"):V.push("/")}catch(e){f.value="Invalid email or password"}},y=async()=>{if(g.value===k.value)try{await n["a"].post("/api/register",{email:t.value,username:a.value,password:g.value});f.value="Registration successful. Please login.",h()}catch(e){f.value="Registration failed: "+e.response.data.detail}else f.value="Passwords do not match"};return(e,c)=>{const o=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",r,[Object(l["createElementVNode"])("div",s,[w.value?(Object(l["openBlock"])(),Object(l["createElementBlock"])("h2",i,"Login")):(Object(l["openBlock"])(),Object(l["createElementBlock"])("h2",d,"Register")),Object(l["createElementVNode"])("form",{onSubmit:c[4]||(c[4]=Object(l["withModifiers"])(e=>w.value?N():y(),["prevent"]))},[Object(l["createElementVNode"])("div",u,[c[5]||(c[5]=Object(l["createElementVNode"])("label",null,"Email",-1)),Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":c[0]||(c[0]=e=>t.value=e),type:"email",required:""},null,512),[[l["vModelText"],t.value]])]),w.value?Object(l["createCommentVNode"])("",!0):(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",b,[c[6]||(c[6]=Object(l["createElementVNode"])("label",null,"Username",-1)),Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":c[1]||(c[1]=e=>a.value=e),type:"text",required:""},null,512),[[l["vModelText"],a.value]])])),Object(l["createElementVNode"])("div",m,[c[7]||(c[7]=Object(l["createElementVNode"])("label",null,"Password",-1)),Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":c[2]||(c[2]=e=>g.value=e),type:"password",required:""},null,512),[[l["vModelText"],g.value]])]),w.value?Object(l["createCommentVNode"])("",!0):(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",p,[c[8]||(c[8]=Object(l["createElementVNode"])("label",null,"Confirm Password",-1)),Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":c[3]||(c[3]=e=>k.value=e),type:"password",required:""},null,512),[[l["vModelText"],k.value]])])),Object(l["createElementVNode"])("button",v,Object(l["toDisplayString"])(w.value?"Login":"Register"),1),f.value?(Object(l["openBlock"])(),Object(l["createElementBlock"])("p",j,Object(l["toDisplayString"])(f.value),1)):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("p",O,[Object(l["createVNode"])(o,{to:"/reset-password"},{default:Object(l["withCtx"])(()=>c[9]||(c[9]=[Object(l["createTextVNode"])("Forgot password?")])),_:1})])],32),Object(l["createElementVNode"])("p",{onClick:h,class:"toggle-link"},Object(l["toDisplayString"])(w.value?"Don't have an account? Register":"Already have an account? Login"),1)])])}}},k=(a("859e"),a("6b0d")),f=a.n(k);const w=f()(g,[["__scopeId","data-v-3b1ff9bf"]]);t["default"]=w},c86c:function(e,t,a){}}]);
//# sourceMappingURL=chunk-077d3061.332443a3.js.map