(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-706fbf07"],{3530:function(e,t,c){"use strict";c.r(t);var a=c("7a23"),l=c("b775");const n={class:"admin-container"},o={class:"data-table"},r={class:"actions"},i=["onClick"],d=["onClick"],u={key:0,class:"modal"},b={class:"modal-content"},s={class:"form-group"};var m={__name:"CategoryAdmin",setup(e){Object(a["ref"])("http://13.215.48.147:8000");const t=Object(a["ref"])([]),c=Object(a["ref"])(!1),m=Object(a["ref"])({name:""}),O=Object(a["ref"])(null),j=Object(a["ref"])(!1),p=Object(a["computed"])(()=>j.value?"Edit Category":"Add Category"),v=async()=>{const e=await l["a"].get("/api/categories");t.value=e.data},E=()=>{j.value=!1,m.value={name:""},c.value=!0},N=e=>{j.value=!0,m.value={...e},O.value=e.catid,c.value=!0},V=async()=>{try{j.value?await l["a"].put("/api/categories/"+O.value,m.value):await l["a"].post("/api/categories",m.value),await v(),k()}catch(e){console.error("操作失败:",e)}},f=async e=>{confirm("确定要删除该分类吗？")&&(await l["a"].delete("/api/categories/"+e),await v())},k=()=>{c.value=!1};return Object(a["onMounted"])(v),(e,l)=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",n,[Object(a["createElementVNode"])("div",{class:"action-bar"},[Object(a["createElementVNode"])("button",{class:"btn primary",onClick:E},"Add Category")]),Object(a["createElementVNode"])("table",o,[l[1]||(l[1]=Object(a["createElementVNode"])("thead",null,[Object(a["createElementVNode"])("tr",null,[Object(a["createElementVNode"])("th",null,"ID"),Object(a["createElementVNode"])("th",null,"Name"),Object(a["createElementVNode"])("th",null,"Operation")])],-1)),Object(a["createElementVNode"])("tbody",null,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(t.value,e=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("tr",{key:e.catid},[Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(e.catid),1),Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(e.name),1),Object(a["createElementVNode"])("td",r,[Object(a["createElementVNode"])("button",{class:"btn edit",onClick:t=>N(e)},"Edit",8,i),Object(a["createElementVNode"])("button",{class:"btn danger",onClick:t=>f(e.catid)},"Delete",8,d)])]))),128))])]),c.value?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",u,[Object(a["createElementVNode"])("div",b,[Object(a["createElementVNode"])("h3",null,Object(a["toDisplayString"])(p.value),1),Object(a["createElementVNode"])("form",{onSubmit:Object(a["withModifiers"])(V,["prevent"])},[Object(a["createElementVNode"])("div",s,[l[2]||(l[2]=Object(a["createElementVNode"])("label",null,"Category Name",-1)),Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"text","onUpdate:modelValue":l[0]||(l[0]=e=>m.value.name=e),required:"",class:"form-input"},null,512),[[a["vModelText"],m.value.name]])]),Object(a["createElementVNode"])("div",{class:"form-actions"},[Object(a["createElementVNode"])("button",{type:"button",class:"btn",onClick:k},"取消"),l[3]||(l[3]=Object(a["createElementVNode"])("button",{type:"submit",class:"btn primary"},"提交",-1))])],32)])])):Object(a["createCommentVNode"])("",!0)]))}},O=(c("f8ae"),c("6b0d")),j=c.n(O);const p=j()(m,[["__scopeId","data-v-a032fd76"]]);var v=p;c("0643"),c("fffc");const E={class:"admin-container"},N={class:"data-table"},V=["src"],f={key:1},k={class:"actions"},g=["onClick"],y=["onClick"],h={key:0,class:"modal"},B={class:"modal-content"},C={class:"form-group"},w={class:"form-group"},D=["value"],_={class:"form-group"},S={class:"form-group"},P={class:"form-group"},M={key:0,class:"upload-status"};var A={__name:"ProductAdmin",setup(e){const t=Object(a["ref"])("http://13.215.48.147:8000"),c=Object(a["ref"])([]),n=Object(a["ref"])([]),o=Object(a["ref"])(!1),r=Object(a["ref"])({name:"",catid:"",price:0,description:"",image_url:"",thumbnail_url:""}),i=Object(a["ref"])(null),d=Object(a["ref"])(!1),u=Object(a["ref"])(""),b=Object(a["computed"])(()=>d.value?"Edit Product":"Add Product"),s=async()=>{const e=await l["a"].get("/api/products");c.value=e.data,console.log(c.value);for(let t=0;t<c.value.length;t++)c.value[t].cname=n.value.find(e=>e.catid===c.value[t].catid).name},m=async()=>{const e=await l["a"].get("/api/categories");n.value=e.data},O=()=>{d.value=!1,r.value={name:"",catid:"",price:0,description:"",image_url:"",thumbnail_url:""},o.value=!0},j=e=>{d.value=!0,r.value={...e},i.value=e.pid,o.value=!0},p=()=>r.value.name.trim()?r.value.catid?!(r.value.price<=0)||(alert("The price must be greater than 0"),!1):(alert("Please select product category"),!1):(alert("Product name can not be blank"),!1),v=async()=>{if(p())try{d.value?await l["a"].put("/api/products/"+i.value,r.value):await l["a"].post("/api/products",r.value),await s(),x()}catch(e){console.error("操作失败:",e)}},A=async e=>{confirm("Are you sure you want to delete this product?")&&(await l["a"].delete("/api/products/"+e),await s(),confirm("Delete Successful"))},U=async e=>{const t=e.target.files[0];if(!t)return;const c=new FormData;c.append("file",t);try{const e=await l["a"].post("/api/upload-image",c,{headers:{"Content-Type":"multipart/form-data"}});r.value.image_url=e.data.image_url,r.value.thumbnail_url=e.data.thumbnail_url,u.value="Upload Successful"}catch(a){u.value="Upload Failed"}},x=()=>{o.value=!1};return Object(a["onMounted"])(()=>{m(),s()}),(e,l)=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",E,[Object(a["createElementVNode"])("div",{class:"action-bar"},[Object(a["createElementVNode"])("button",{class:"btn primary",onClick:O},"Add Product")]),Object(a["createElementVNode"])("table",N,[l[4]||(l[4]=Object(a["createElementVNode"])("thead",null,[Object(a["createElementVNode"])("tr",null,[Object(a["createElementVNode"])("th",null,"ID"),Object(a["createElementVNode"])("th",null,"Prooduct Name"),Object(a["createElementVNode"])("th",null,"Category"),Object(a["createElementVNode"])("th",null,"Price"),Object(a["createElementVNode"])("th",null,"Description"),Object(a["createElementVNode"])("th",null,"Picture"),Object(a["createElementVNode"])("th",null,"Operation")])],-1)),Object(a["createElementVNode"])("tbody",null,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(c.value,e=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("tr",{key:e.pid},[Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(e.pid),1),Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(e.name),1),Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(e.cname),1),Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(e.price),1),Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(e.description),1),Object(a["createElementVNode"])("td",null,[e.thumbnail_url?(Object(a["openBlock"])(),Object(a["createElementBlock"])("img",{key:0,src:t.value+e.thumbnail_url,class:"thumbnail"},null,8,V)):(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",f,"Not Found Image"))]),Object(a["createElementVNode"])("td",k,[Object(a["createElementVNode"])("button",{class:"btn edit",onClick:t=>j(e)},"Edit",8,g),Object(a["createElementVNode"])("button",{class:"btn danger",onClick:t=>A(e.pid)},"Delete",8,y)])]))),128))])]),o.value?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",h,[Object(a["createElementVNode"])("div",B,[Object(a["createElementVNode"])("h3",null,Object(a["toDisplayString"])(b.value),1),Object(a["createElementVNode"])("form",{onSubmit:Object(a["withModifiers"])(v,["prevent"])},[Object(a["createElementVNode"])("div",C,[l[5]||(l[5]=Object(a["createElementVNode"])("label",null,"Name",-1)),Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"text","onUpdate:modelValue":l[0]||(l[0]=e=>r.value.name=e),required:"",class:"form-input"},null,512),[[a["vModelText"],r.value.name]])]),Object(a["createElementVNode"])("div",w,[l[6]||(l[6]=Object(a["createElementVNode"])("label",null,"Category",-1)),Object(a["withDirectives"])(Object(a["createElementVNode"])("select",{"onUpdate:modelValue":l[1]||(l[1]=e=>r.value.catid=e),required:"",class:"form-input"},[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(n.value,e=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("option",{key:e.catid,value:e.catid},Object(a["toDisplayString"])(e.name),9,D))),128))],512),[[a["vModelSelect"],r.value.catid]])]),Object(a["createElementVNode"])("div",_,[l[7]||(l[7]=Object(a["createElementVNode"])("label",null,"Price",-1)),Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"number","onUpdate:modelValue":l[2]||(l[2]=e=>r.value.price=e),step:"0.01",required:"",class:"form-input"},null,512),[[a["vModelText"],r.value.price]])]),Object(a["createElementVNode"])("div",S,[l[8]||(l[8]=Object(a["createElementVNode"])("label",null,"Description",-1)),Object(a["withDirectives"])(Object(a["createElementVNode"])("textarea",{"onUpdate:modelValue":l[3]||(l[3]=e=>r.value.description=e),class:"form-input"},null,512),[[a["vModelText"],r.value.description]])]),Object(a["createElementVNode"])("div",P,[l[9]||(l[9]=Object(a["createElementVNode"])("label",null,"Upload Picture",-1)),Object(a["createElementVNode"])("input",{type:"file",onChange:U,accept:"image/*"},null,32),u.value?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",M,Object(a["toDisplayString"])(u.value),1)):Object(a["createCommentVNode"])("",!0)]),Object(a["createElementVNode"])("div",{class:"form-actions"},[Object(a["createElementVNode"])("button",{type:"button",class:"btn",onClick:x},"Cancel"),l[10]||(l[10]=Object(a["createElementVNode"])("button",{type:"submit",class:"btn primary"},"Submit",-1))])],32)])])):Object(a["createCommentVNode"])("",!0)]))}};c("3a83");const U=j()(A,[["__scopeId","data-v-3518ea32"]]);var x=U;const F={class:"admin-home"},I={class:"tabs"},T={class:"tab-content"};var q={__name:"Admin",setup(e){const t=Object(a["ref"])("categories");return(e,c)=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",F,[Object(a["createElementVNode"])("div",I,[Object(a["createElementVNode"])("button",{class:Object(a["normalizeClass"])(["tab-button",{active:"categories"===t.value}]),onClick:c[0]||(c[0]=e=>t.value="categories")}," Category Management ",2),Object(a["createElementVNode"])("button",{class:Object(a["normalizeClass"])(["tab-button",{active:"products"===t.value}]),onClick:c[1]||(c[1]=e=>t.value="products")}," Product Management ",2)]),Object(a["createElementVNode"])("div",T,["categories"===t.value?(Object(a["openBlock"])(),Object(a["createBlock"])(v,{key:0})):Object(a["createCommentVNode"])("",!0),"products"===t.value?(Object(a["openBlock"])(),Object(a["createBlock"])(x,{key:1})):Object(a["createCommentVNode"])("",!0)])]))}};c("c10f");const L=j()(q,[["__scopeId","data-v-52080d22"]]);t["default"]=L},"3a83":function(e,t,c){"use strict";c("8734")},6382:function(e,t,c){},8734:function(e,t,c){},"97bc":function(e,t,c){},c10f:function(e,t,c){"use strict";c("97bc")},f8ae:function(e,t,c){"use strict";c("6382")}}]);
//# sourceMappingURL=chunk-706fbf07.f029ce32.js.map